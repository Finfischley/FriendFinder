<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Friend Survey</title>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
  <script src="https://code.jquery.com/jquery.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
</head>
<body>
  <h3 class="panel-title"><strong>You</strong></h3>
      <div class="panel-body">
      <form method="POST" role="form">

        <div class="col-md-9">
          <label for="name">Name (Required)</label>
          <input type="text" class="form-control" id="name">
        </div>

        <div class="col-md-9">
          <label for="link">Link to Photo Image (Required)</label>
          <input type="link" class="form-control" id="picLink">
        </div>
      </form>
      </div>
        <br>

  <h3 class="panel-title"><strong>Survey Questions</strong></h3>
    <fieldset class="form-group">
        <label for="q1">1. I am a "big-picture" type of person.</label>
        <br>
        <div class="col-md-3">
          <select class="form-control" id="q1" name="scores[0]">
            <option value="">Select</option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option> 
            <option value="5">5 (Strongly Agree)</option>
          </select> 
        </div>  
    </fieldset>
    <br>
    <fieldset class="form-group">
        <label for="q2">2. I get along great with my family.</label>
        <br>
        <div class="col-md-3">
          <select class="form-control" id="q2" name="scores[1]">
            <option value="">Select</option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option> 
            <option value="5">5 (Strongly Agree)</option>
          </select> 
        </div>  
    </fieldset>
    <br>
    <fieldset class="form-group">
        <label for="q3">3. I am a dog person.</label>
        <br>
        <div class="col-md-3">
          <select class="form-control" id="q3" name="scores[2]">
            <option value="">Select</option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option> 
            <option value="5">5 (Strongly Agree)</option>
          </select> 
        </div>
    </fieldset>
    <br>
    <fieldset class="form-group">
        <label for="q4">4. I love going to the movies.</label>
        <br>
        <div class="col-md-3">
          <select class="form-control" id="q4" name="scores[3]">
            <option value="">Select</option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option> 
            <option value="5">5 (Strongly Agree)</option>
          </select> 
        </div>
    </fieldset>
    <br>
    <fieldset class="form-group">
        <label for="q5">5. Regular excercise is very important to me.</label>
        <br>
        <div class="col-md-3">
          <select class="form-control" id="q5" name="scores[4]">
            <option value="">Select</option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option> 
            <option value="5">5 (Strongly Agree)</option>
          </select> 
        </div>
    </fieldset>
    <br>
    <fieldset class="form-group">
        <label for="q6">6. "Die Hard" is the greatest holiday/action movie of all time.</label>
        <br>
        <div class="col-md-3">
          <select class="form-control" id="q6" name="scores[5]">
            <option value="">Select</option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option> 
            <option value="5">5 (Strongly Agree)</option>
          </select> 
        </div>
    </fieldset>
    <br>
    <fieldset class="form-group">
        <label for="q7">7. Playing games is one of my favorite passtimes.</label>
        <br>
        <div class="col-md-3">
          <select class="form-control" id="q7" name="scores[6]">
            <option value="">Select</option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option> 
            <option value="5">5 (Strongly Agree)</option>
          </select> 
        </div>
    </fieldset>
    <br>
    <fieldset class="form-group">
        <label for="q8">8. I am a religious person.</label>
        <br>
        <div class="col-md-3">
          <select class="form-control" id="q8" name="scores[7]">
            <option value="">Select</option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option> 
            <option value="5">5 (Strongly Agree)</option>
          </select> 
        </div>
    </fieldset>
    <br>
    <fieldset class="form-group">
        <label for="q9">9. I like to travel. </label>
        <br>
        <div class="col-md-3">
          <select class="form-control" id="q9" name="scores[8]">
            <option value="">Select</option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option> 
            <option value="5">5 (Strongly Agree)</option>
          </select> 
        </div>
    </fieldset>
    <br>
    <fieldset class="form-group">
        <label for="q10">10. Money is important to me. </label>
        <br>
        <div class="col-md-3">
          <select class="form-control" id="q10" name="scores[9]">
            <option value="">Select</option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option> 
            <option value="5">5 (Strongly Agree)</option>
          </select> 
        </div>
    </fieldset>
    <br>
    <!-- <button id="add-btn">Submit</button> -->

    <p><a class="btn btn-primary btn-lg" href="/api/friends" role="button" id="add-btn">Find a friend!</a></p>

    <!-- Modal -->
      <div id="resultsModal" class="modal fade" role="dialog">
        <div class="modal-dialog">

          <!-- Modal content-->
          <div class="modal-content">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal">&times;</button>
              <h2 class="modal-title"><strong>Best Match</strong></h2>
            </div>
            <div class="modal-body">
              <h2 id="matchName"></h2>
              <!-- <img id="matchImg" src="https://media.licdn.com/mpr/mpr/shrinknp_400_400/p/6/005/064/1bd/3435aa3.jpg" alt=""> -->
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
          </div>

        </div>
      </div>

    

<script type="text/javascript">

  $("#add-btn").on("click", function(event) {
      event.preventDefault();
      var answers = [];

        for(var i = 1; i < 11; i++) {
          var response = $("#q" + i).val();
          answers.push(parseInt(response));
        }
      console.log(answers);
      
      var friend = {
        name: $("#name").val().trim(),
        link: $("#picLink").val().trim(),
        scores: $ (answers)
      };
      console.log(friend);

      var currentUrl = window.location.origin;

      $.post(currentUrl + "/api/friends", friend).done(function(data){
        console.log(data);
      });
      // fetch("/api/friends",{method:'post',body:JSON.stringify(friend),headers:{
      //           "Content-Type":"application/json"
      //       }})
      //       // .then(x => x.json())
      //       .then(function(data){$.post("/api/new", friend)
      //       .done(function(data) {
      //         console.log(data);  
      //         alert("Closest Match: " + friendMatch);
      //       });
      //       });
          });
</script>
</body>
</html>